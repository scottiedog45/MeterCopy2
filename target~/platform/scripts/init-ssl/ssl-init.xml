<?xml version="1.0" encoding="UTF-8"?>
<!--
  Copyright 2015-2019 IS2T. All rights reserved.
  IS2T PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.
-->
<project name="ssl">

	<import file="${scripts.dir}/extension-init.xml" />
	
	<target name="context/ssl" extensionOf="init/context">
		<available property="usesSSL" classname="com.is2t.support.net.ssl.AbstractSSLContext" classpath="${application.classpath}" ignoresystemclasses="true"/>
	</target>
		
	<target name="init/ssl" extensionOf="init/execution" if="usesSSL">
		<!-- CLASSPATH -->
		<augment id="init.application.classpath">
			<fileset dir="${jpf.dir}/javaLibs" includes="security-*.jar"/>
		</augment>
				
		<augment id="init.requires">
			<!-- available SSL context implementations -->
			<string value="com.is2t.support.net.ssl.DefaultSSLContext"/>
			<string value="com.is2t.support.net.ssl.SSLv3Context"/>
			<string value="com.is2t.support.net.ssl.TLSContext"/>
			<string value="com.is2t.support.net.ssl.TLSv10Context"/>
			<string value="com.is2t.support.net.ssl.TLSv11Context"/>
			<string value="com.is2t.support.net.ssl.TLSv12Context"/>
			
			<!-- X509 TrustManagerFactory implementation -->
			<string value="com.is2t.support.net.ssl.TrustManagerFactoryImpl"/>
			
			<!-- X509 KeyManagerFactory implementation -->
			<string value="com.is2t.support.net.ssl.KeyManagerFactoryImpl"/>
		</augment>

		<augment id="init.properties">
			<!-- Get the maximum certificate data size -->
			<propertyref name="com.is2t.ssl.embedded.max.cert.key.size"/>
			<propertyref name="com.is2t.ssl.embedded.max.key.password.size"/>
		</augment>
		
		
	</target>
	
</project>