<?xml version="1.0" encoding="UTF-8"?>
<!--
	Ant file
	
	Copyright 2013-2018 IS2T. All rights reserved.
	IS2T PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.
-->

<project name="DeployToolCore" default="deploy">

	<extension-point name="flash" description="Board flashing specific part" depends="flash/init"/>
	<extension-point name="flash/checks" description="Board flash result check specific part"/>
	<extension-point name="reset" description="Board reseting specific part" depends="reset/init" unless="deploy.noReset"/>
	<extension-point name="clean" description="Clean temporary files (extension targets must be conditioned with a if='clean.extrafiles')"/>
	
	<target name="deploy" depends="flash, flash/checks, flash/complete, reset, reset/complete, clean"/>

	<target name="flash/init">
		<echo message="=============== [ FLASH ] ==============="/>
	</target>

	<target name="flash/complete">
		<echo message="Flash programming completed successfully."/>
	</target>
	
	<target name="reset/init">
		<echo message="=============== [ RESET ] ==============="/>
	</target>

	<target name="reset/complete">
		<echo message="Board reset completed successfully."/>
	</target>
	
	<target name="print.points">
		<waitfor checkevery="1" checkeveryunit="second" maxwait="5" maxwaitunit="second">
			<available file="${programming.waiting.file}"/>
		</waitfor>
		<condition property="print.points.stop" value="true">
			<available file="${programming.waiting.file}"/>
		</condition>
		<antcall target="print.points.continue"/>
	</target>
		
	<target name="print.points.continue" unless="print.points.stop">
			<echo message=".....................................
	"/>
			<antcall target="print.points"/>
	</target>
	
</project>